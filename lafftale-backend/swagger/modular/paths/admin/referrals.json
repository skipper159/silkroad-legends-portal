{
  "/admin/referrals": {
    "get": {
      "tags": ["Admin - Referrals"],
      "summary": "Get all referrals with pagination",
      "description": "Retrieve paginated list of all referrals with anti-cheat information",
      "security": [{ "bearerAuth": [] }],
      "parameters": [
        {
          "name": "page",
          "in": "query",
          "schema": { "type": "integer", "default": 1 },
          "description": "Page number"
        },
        {
          "name": "limit",
          "in": "query",
          "schema": { "type": "integer", "default": 20 },
          "description": "Items per page"
        },
        {
          "name": "status",
          "in": "query",
          "schema": {
            "type": "string",
            "enum": ["all", "valid", "suspicious", "claimed", "unclaimed"]
          },
          "description": "Filter by status"
        },
        {
          "name": "search",
          "in": "query",
          "schema": { "type": "string" },
          "description": "Search in usernames or codes"
        }
      ],
      "responses": {
        "200": {
          "description": "Referrals retrieved successfully",
          "content": {
            "application/json": {
              "schema": {
                "allOf": [
                  { "$ref": "#/components/schemas/SuccessResponse" },
                  {
                    "type": "object",
                    "properties": {
                      "data": {
                        "type": "object",
                        "properties": {
                          "referrals": {
                            "type": "array",
                            "items": { "$ref": "#/components/schemas/Referral" }
                          },
                          "pagination": {
                            "$ref": "#/components/schemas/PaginationInfo"
                          }
                        }
                      }
                    }
                  }
                ]
              }
            }
          }
        },
        "401": { "$ref": "#/components/responses/Unauthorized" },
        "403": { "$ref": "#/components/responses/Forbidden" }
      }
    }
  },
  "/admin/referrals/stats": {
    "get": {
      "tags": ["Admin - Referrals"],
      "summary": "Get referral system statistics",
      "description": "Retrieve comprehensive statistics for the referral system",
      "security": [{ "bearerAuth": [] }],
      "responses": {
        "200": {
          "description": "Statistics retrieved successfully",
          "content": {
            "application/json": {
              "schema": {
                "allOf": [
                  { "$ref": "#/components/schemas/SuccessResponse" },
                  {
                    "type": "object",
                    "properties": {
                      "data": { "$ref": "#/components/schemas/ReferralStats" }
                    }
                  }
                ]
              }
            }
          }
        },
        "401": { "$ref": "#/components/responses/Unauthorized" },
        "403": { "$ref": "#/components/responses/Forbidden" }
      }
    }
  },
  "/admin/referrals/suspicious": {
    "get": {
      "tags": ["Admin - Referrals"],
      "summary": "Get suspicious referrals",
      "description": "Retrieve referrals flagged by anti-cheat system",
      "security": [{ "bearerAuth": [] }],
      "parameters": [
        {
          "name": "page",
          "in": "query",
          "schema": { "type": "integer", "default": 1 }
        },
        {
          "name": "limit",
          "in": "query",
          "schema": { "type": "integer", "default": 20 }
        }
      ],
      "responses": {
        "200": {
          "description": "Suspicious referrals retrieved",
          "content": {
            "application/json": {
              "schema": {
                "allOf": [
                  { "$ref": "#/components/schemas/SuccessResponse" },
                  {
                    "type": "object",
                    "properties": {
                      "data": {
                        "type": "object",
                        "properties": {
                          "referrals": {
                            "type": "array",
                            "items": { "$ref": "#/components/schemas/Referral" }
                          },
                          "pagination": {
                            "$ref": "#/components/schemas/PaginationInfo"
                          }
                        }
                      }
                    }
                  }
                ]
              }
            }
          }
        },
        "401": { "$ref": "#/components/responses/Unauthorized" },
        "403": { "$ref": "#/components/responses/Forbidden" }
      }
    }
  },
  "/admin/referrals/{id}/validate": {
    "put": {
      "tags": ["Admin - Referrals"],
      "summary": "Manually validate referral",
      "description": "Mark a suspicious referral as valid or invalid",
      "security": [{ "bearerAuth": [] }],
      "parameters": [
        {
          "name": "id",
          "in": "path",
          "required": true,
          "schema": { "type": "integer" },
          "description": "Referral ID"
        }
      ],
      "requestBody": {
        "required": true,
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "isValid": {
                  "type": "boolean",
                  "description": "Whether referral is valid"
                },
                "reason": {
                  "type": "string",
                  "description": "Reason for validation decision"
                }
              },
              "required": ["isValid"]
            }
          }
        }
      },
      "responses": {
        "200": {
          "description": "Referral validation updated",
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/SuccessResponse" }
            }
          }
        },
        "404": { "$ref": "#/components/responses/NotFound" },
        "401": { "$ref": "#/components/responses/Unauthorized" },
        "403": { "$ref": "#/components/responses/Forbidden" }
      }
    }
  },
  "/admin/referrals/{id}/reward": {
    "post": {
      "tags": ["Admin - Referrals"],
      "summary": "Manually process referral reward",
      "description": "Process reward for a valid referral",
      "security": [{ "bearerAuth": [] }],
      "parameters": [
        {
          "name": "id",
          "in": "path",
          "required": true,
          "schema": { "type": "integer" },
          "description": "Referral ID"
        }
      ],
      "requestBody": {
        "required": false,
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "customAmount": {
                  "type": "integer",
                  "description": "Custom reward amount (overrides default)"
                },
                "notes": {
                  "type": "string",
                  "description": "Admin notes for the reward"
                }
              }
            }
          }
        }
      },
      "responses": {
        "200": {
          "description": "Reward processed successfully",
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/SuccessResponse" }
            }
          }
        },
        "400": { "$ref": "#/components/responses/BadRequest" },
        "404": { "$ref": "#/components/responses/NotFound" },
        "401": { "$ref": "#/components/responses/Unauthorized" },
        "403": { "$ref": "#/components/responses/Forbidden" }
      }
    }
  },
  "/admin/referrals/settings": {
    "get": {
      "tags": ["Admin - Referrals"],
      "summary": "Get referral system settings",
      "description": "Retrieve current anti-cheat and referral system configuration",
      "security": [{ "bearerAuth": [] }],
      "responses": {
        "200": {
          "description": "Settings retrieved successfully",
          "content": {
            "application/json": {
              "schema": {
                "allOf": [
                  { "$ref": "#/components/schemas/SuccessResponse" },
                  {
                    "type": "object",
                    "properties": {
                      "data": {
                        "$ref": "#/components/schemas/ReferralSettings"
                      }
                    }
                  }
                ]
              }
            }
          }
        },
        "401": { "$ref": "#/components/responses/Unauthorized" },
        "403": { "$ref": "#/components/responses/Forbidden" }
      }
    },
    "put": {
      "tags": ["Admin - Referrals"],
      "summary": "Update referral system settings",
      "description": "Update anti-cheat and referral system configuration",
      "security": [{ "bearerAuth": [] }],
      "requestBody": {
        "required": true,
        "content": {
          "application/json": {
            "schema": { "$ref": "#/components/schemas/ReferralSettings" }
          }
        }
      },
      "responses": {
        "200": {
          "description": "Settings updated successfully",
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/SuccessResponse" }
            }
          }
        },
        "400": { "$ref": "#/components/responses/BadRequest" },
        "401": { "$ref": "#/components/responses/Unauthorized" },
        "403": { "$ref": "#/components/responses/Forbidden" }
      }
    }
  },
  "/admin/referrals/anti-cheat": {
    "get": {
      "tags": ["Admin - Referrals"],
      "summary": "Get anti-cheat statistics",
      "description": "Retrieve detailed anti-cheat statistics and patterns",
      "security": [{ "bearerAuth": [] }],
      "responses": {
        "200": {
          "description": "Anti-cheat stats retrieved",
          "content": {
            "application/json": {
              "schema": {
                "allOf": [
                  { "$ref": "#/components/schemas/SuccessResponse" },
                  {
                    "type": "object",
                    "properties": {
                      "data": {
                        "type": "object",
                        "properties": {
                          "ipAnalysis": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "ip": { "type": "string" },
                                "count": { "type": "integer" },
                                "users": {
                                  "type": "array",
                                  "items": { "type": "string" }
                                },
                                "suspicious": { "type": "boolean" }
                              }
                            }
                          },
                          "fingerprintAnalysis": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "fingerprint": { "type": "string" },
                                "count": { "type": "integer" },
                                "users": {
                                  "type": "array",
                                  "items": { "type": "string" }
                                },
                                "suspicious": { "type": "boolean" }
                              }
                            }
                          },
                          "validationStats": {
                            "type": "object",
                            "properties": {
                              "totalChecked": { "type": "integer" },
                              "validCount": { "type": "integer" },
                              "suspiciousCount": { "type": "integer" },
                              "autoValidated": { "type": "integer" },
                              "manuallyReviewed": { "type": "integer" }
                            }
                          }
                        }
                      }
                    }
                  }
                ]
              }
            }
          }
        },
        "401": { "$ref": "#/components/responses/Unauthorized" },
        "403": { "$ref": "#/components/responses/Forbidden" }
      }
    }
  }
}
